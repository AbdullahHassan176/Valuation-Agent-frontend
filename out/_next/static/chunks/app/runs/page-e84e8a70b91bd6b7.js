(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[611],{4278:function(e,a,t){Promise.resolve().then(t.bind(t,2939))},2939:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return RunsPage}});var s=t(7437),l=t(2265),n=t(4033),r=t(3611),i=t(9598),c=t(5831),d=t(1465),o=t(7532),x=t(708),u=t(6005),h=t(5718),m=t(2031),g=t(5477),j=t(1750),p=t(3008),v=t(5305),f=t(2104),y=t(4958),N=t(6264),b=t(9883),w=t(2482),S=t(4280),R=t(1827),C=t(2549),I=t(5367),k=t(5817),F=t(1274),D=t(6637),_=t(9670),P=t(1291),O=t(7158),Z=t(7972),Y=t(890),T=t(2894);function RunsPage(){let e=(0,n.useRouter)(),[a,t]=(0,l.useState)([]),[z,A]=(0,l.useState)(!0),[Q,U]=(0,l.useState)(null),[M,V]=(0,l.useState)(!1),[E,B]=(0,l.useState)(!1),[L,q]=(0,l.useState)([]),[J,G]=(0,l.useState)(""),[H,X]=(0,l.useState)("all"),[K,W]=(0,l.useState)("all"),[$,ee]=(0,l.useState)("created_at"),[ea,et]=(0,l.useState)("desc"),[es,el]=(0,l.useState)(1),[en]=(0,l.useState)(10),[er,ei]=(0,l.useState)(!1),[ec,ed]=(0,l.useState)(!1),[eo,ex]=(0,l.useState)({name:"",type:"IRS",notional:"",currency:"USD",tenor:"5Y",fixedRate:"",floatingIndex:"SOFR"});(0,l.useEffect)(()=>{fetchRuns(),console.log("Auto-refresh disabled to prevent infinite loops");let e=null;return ec&&(e=setInterval(()=>{let e=a.some(e=>"running"===e.status||"pending"===e.status);e&&!er&&(console.log("Polling for running runs..."),fetchRuns())},3e5)),()=>{e&&clearInterval(e)}},[]);let fetchRuns=async()=>{A(!0),U(null);try{console.log("Attempting to fetch runs from API...");let e="localhost"===window.location.hostname?"http://localhost:8000/api/valuation/runs":"https://valuation-backend-api-cadmfqgxgzawa7fp.canadacentral-01.azurewebsites.net/api/valuation/runs";console.log("Fetching runs from API URL:",e);let a=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("API Response status:",a.status),!a.ok)throw Error("HTTP error! status: ".concat(a.status));let s=await a.json();console.log("Fetched runs from API:",s);let l=s.map(e=>({id:e.id,name:e.name||"".concat(e.currency||"USD"," ").concat(e.tenor||"5Y"," ").concat(e.type||"IRS"),type:e.type||"IRS",status:e.status||"completed",notional:e.notional||0,currency:e.currency||"USD",tenor:e.tenor||"5Y",fixedRate:e.fixedRate,floatingIndex:e.floatingIndex||"SOFR",pv:e.pv||e.pv_base_ccy||0,pv01:e.pv01||0,created_at:e.created_at||new Date().toISOString(),completed_at:e.completed_at,error:e.error})),n=JSON.parse(localStorage.getItem("mockRuns")||"[]"),r=n.map(e=>{var a,t,s,l,n,r,i,c,d,o,x,u,h,m;return{id:e.id,name:"".concat((null===(a=e.spec)||void 0===a?void 0:a.ccy)||"USD"," ").concat((null===(t=e.spec)||void 0===t?void 0:t.maturity)||"5Y"," ").concat((null===(s=e.spec)||void 0===s?void 0:s.ccy2)?"CCS":"IRS"),type:(null===(l=e.spec)||void 0===l?void 0:l.ccy2)?"CCS":"IRS",status:e.status,notional:(null===(n=e.spec)||void 0===n?void 0:n.notional)||0,currency:(null===(r=e.spec)||void 0===r?void 0:r.ccy)||"USD",tenor:calculateTenorFromMaturity(null===(i=e.spec)||void 0===i?void 0:i.effective,null===(c=e.spec)||void 0===c?void 0:c.maturity),fixedRate:null===(d=e.spec)||void 0===d?void 0:d.fixedRate,floatingIndex:(null===(o=e.spec)||void 0===o?void 0:o.floatIndex)||"SOFR",pv:(null===(x=e.result)||void 0===x?void 0:x.total_pv)||0,pv01:(null===(m=e.result)||void 0===m?void 0:null===(h=m.sensitivities)||void 0===h?void 0:null===(u=h[0])||void 0===u?void 0:u.value)||0,created_at:e.created_at,completed_at:"completed"===e.status?e.created_at:void 0,error:void 0}});t([...l,...r])}catch(e){console.error("Error fetching runs:",e),console.log("Falling back to mock data due to API error"),t([{id:"run-001",name:"USD 5Y IRS - Par Trade",type:"IRS",status:"completed",notional:1e7,currency:"USD",tenor:"5Y",fixedRate:4.25,floatingIndex:"SOFR-3M",pv:125e3,pv01:4500,created_at:"2024-01-15T10:30:00Z",completed_at:"2024-01-15T10:32:15Z"},{id:"run-002",name:"EUR/USD CCS - Cross Currency",type:"CCS",status:"running",notional:5e6,currency:"EUR",tenor:"3Y",floatingIndex:"EURIBOR-3M",progress:65,created_at:"2024-01-15T11:15:00Z"}]),U("Backend API not available - using mock data. Check if backend is running on port 9000.")}finally{A(!1)}},calculateTenorFromMaturity=(e,a)=>{if(!e||!a)return"5Y";let t=new Date(e),s=new Date(a),l=s.getFullYear()-t.getFullYear();return"".concat(l,"Y")},handleNewRun=async()=>{try{let e;let a={...eo,notional:parseFloat(eo.notional),fixedRate:eo.fixedRate?parseFloat(eo.fixedRate):void 0};console.log("Creating new run:",a);let s=new Date().toISOString().split("T")[0];"IRS"===a.type?e={notional:a.notional,ccy:a.currency,payFixed:!0,fixedRate:a.fixedRate||.05,floatIndex:a.floatingIndex,effective:s,maturity:calculateMaturityDate(s,a.tenor),dcFixed:"ACT/360",dcFloat:"ACT/360",freqFixed:"Q",freqFloat:"Q",calendar:a.currency,bdc:"MODIFIED_FOLLOWING"}:"CCS"===a.type&&(e={notional:a.notional,ccy:a.currency,payFixed:!0,fixedRate:a.fixedRate||.05,floatIndex:a.floatingIndex,effective:s,maturity:calculateMaturityDate(s,a.tenor),dcFixed:"ACT/360",dcFloat:"ACT/360",freqFixed:"Q",freqFloat:"Q",calendar:a.currency,bdc:"MODIFIED_FOLLOWING",notionalCcy2:.85*a.notional,ccy2:"USD"===a.currency?"EUR":"USD",fxRate:1.08}),console.log("Creating run with spec:",e);let l="localhost"===window.location.hostname?"http://localhost:8000/api/valuation/runs":"https://valuation-backend-api-cadmfqgxgzawa7fp.canadacentral-01.azurewebsites.net/api/valuation/runs";console.log("Calling API URL:",l);try{let n=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spec:{notional:a.notional,ccy:a.currency,fixedRate:a.fixedRate,effective:s,maturity:calculateMaturityDate(s,a.tenor),tenor_years:parseFloat(a.tenor.replace("Y","")),instrument_type:a.type,frequency:"SemiAnnual"},asOf:s})});if(console.log("API Response status:",n.status),n.ok){let e=await n.json();console.log("Run created successfully:",e);let a={id:e.id,name:e.name||"".concat(e.currency||"USD"," ").concat(e.tenor||"5Y"," ").concat(e.type||"IRS"),type:e.type||"IRS",status:e.status||"completed",notional:e.notional||0,currency:e.currency||"USD",tenor:e.tenor||"5Y",fixedRate:e.fixedRate,floatingIndex:e.floatingIndex||"SOFR",pv:e.pv||e.pv_base_ccy||0,pv01:e.pv01||0,created_at:e.created_at||new Date().toISOString(),completed_at:e.completed_at,error:e.error};t(e=>[a,...e]),alert("Run created successfully!")}else{let a=await n.text();console.error("API Error response:",a),console.log("POST endpoint not working, creating mock run...");let t=(null==e?void 0:e.notional)||1e6,s=(null==e?void 0:e.fixedRate)||.05,l=new Date((null==e?void 0:e.maturity)||new Date),r=new Date((null==e?void 0:e.effective)||new Date),i=(l.getTime()-r.getTime())/315576e5,c=Math.exp(-.03*i),d={id:"run-".concat(Date.now()),status:"completed",created_at:new Date().toISOString(),spec:e,result:{total_pv:Math.round(100*(t*(.045-s)*i*c))/100,components:{"Fixed Leg":-t*s*i*c,"Float Leg":.045*t*i*c},sensitivities:[{shock:"PV01",value:Math.round(t*i*c*.01)/100}]}};console.log("Mock run created:",d);let o=JSON.parse(localStorage.getItem("mockRuns")||"[]");o.push(d),localStorage.setItem("mockRuns",JSON.stringify(o)),alert("Run created successfully! (Using mock data due to backend API issue)")}}catch(c){console.error("API call failed, creating mock run:",c);let a=(null==e?void 0:e.notional)||1e6,t=(null==e?void 0:e.fixedRate)||.05,s=new Date((null==e?void 0:e.maturity)||new Date),l=new Date((null==e?void 0:e.effective)||new Date),n=(s.getTime()-l.getTime())/315576e5,r=Math.exp(-.03*n),i={id:"run-".concat(Date.now()),status:"completed",created_at:new Date().toISOString(),spec:e,result:{total_pv:Math.round(100*(a*(.045-t)*n*r))/100,components:{"Fixed Leg":-a*t*n*r,"Float Leg":.045*a*n*r},sensitivities:[{shock:"PV01",value:Math.round(a*n*r*.01)/100}]}};console.log("Mock run created due to error:",i)}await fetchRuns(),ei(!1),V(!1),ex({name:"",type:"IRS",notional:"",currency:"USD",tenor:"5Y",fixedRate:"",floatingIndex:"SOFR"})}catch(e){U("Failed to create run"),console.error("Error creating run:",e)}},calculateMaturityDate=(e,a)=>{let t=new Date(e),s=parseInt(a.replace("Y","")),l=new Date(t);return l.setFullYear(l.getFullYear()+s),l.toISOString().split("T")[0]},handleViewRun=a=>{e.push("/runs/run-detail?id=".concat(a))},handleDeleteRun=e=>{t(a=>a.filter(a=>a.id!==e))},handleSelectRun=e=>{q(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},eu=a.filter(e=>{let a=e.name.toLowerCase().includes(J.toLowerCase())||e.id.toLowerCase().includes(J.toLowerCase()),t="all"===H||e.status===H,s="all"===K||e.type===K;return a&&t&&s}).sort((e,a)=>{let t=0;switch($){case"name":t=e.name.localeCompare(a.name);break;case"status":t=e.status.localeCompare(a.status);break;case"created_at":t=new Date(e.created_at).getTime()-new Date(a.created_at).getTime();break;case"pv":t=(e.pv||0)-(a.pv||0);break;default:t=0}return"asc"===ea?t:-t}),eh=Math.ceil(eu.length/en),em=eu.slice((es-1)*en,es*en),getStatusBadge=e=>{switch(e){case"completed":return(0,s.jsxs)(x.C,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:[(0,s.jsx)(p.Z,{className:"h-3 w-3 mr-1"}),"Completed"]});case"running":return(0,s.jsxs)(x.C,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:[(0,s.jsx)(v.Z,{className:"h-3 w-3 mr-1"}),"Running"]});case"failed":return(0,s.jsxs)(x.C,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:[(0,s.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),"Failed"]});case"pending":return(0,s.jsxs)(x.C,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:[(0,s.jsx)(y.Z,{className:"h-3 w-3 mr-1"}),"Pending"]});default:return(0,s.jsx)(x.C,{variant:"secondary",children:e})}},getTypeBadge=e=>(0,s.jsx)(x.C,{className:"IRS"===e?"bg-blue-500/20 text-blue-400 border-blue-500/30":"bg-green-500/20 text-green-400 border-green-500/30",children:e});return z?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(N.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-lg",children:"Loading runs..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Valuation Runs"}),(0,s.jsx)("p",{className:"text-gray-300 mt-2",children:"Manage and monitor your financial instrument valuations"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 sm:mt-0",children:[(0,s.jsxs)(r.z,{onClick:()=>{ei(!0),V(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"New Run"]}),(0,s.jsxs)(r.z,{variant:"outline",onClick:()=>B(!E),children:[(0,s.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Filters"]}),(0,s.jsxs)(r.z,{variant:"outline",onClick:fetchRuns,children:[(0,s.jsx)(S.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm text-gray-300",children:"Auto-refresh:"}),(0,s.jsx)("button",{onClick:()=>ed(!ec),className:"px-3 py-1 rounded-full text-xs font-medium transition-colors ".concat(ec?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:ec?"ON":"OFF"})]})]})]}),(0,s.jsx)(i.Zb,{className:"mb-6 bg-gray-800 border-gray-700",children:(0,s.jsx)(i.aY,{className:"py-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(R.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(c.I,{placeholder:"Search runs by name or ID...",value:J,onChange:e=>G(e.target.value),className:"pl-10 bg-gray-700 border-gray-600 text-white placeholder-gray-400"})]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>G(""),children:"Clear"}),(0,s.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>B(!E),children:[(0,s.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"Advanced Filters"]})]})]})})}),E&&(0,s.jsxs)(i.Zb,{className:"mb-6 bg-gray-800 border-gray-700",children:[(0,s.jsx)(i.Ol,{children:(0,s.jsx)(i.ll,{className:"text-white",children:"Filters & Search"})}),(0,s.jsx)(i.aY,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"search",children:"Search"}),(0,s.jsx)(c.I,{id:"search",placeholder:"Search runs...",value:J,onChange:e=>G(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"status",children:"Status"}),(0,s.jsxs)(o.Ph,{value:H,onValueChange:X,children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All Status"}),(0,s.jsx)(o.Ql,{value:"pending",children:"Pending"}),(0,s.jsx)(o.Ql,{value:"running",children:"Running"}),(0,s.jsx)(o.Ql,{value:"completed",children:"Completed"}),(0,s.jsx)(o.Ql,{value:"failed",children:"Failed"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"type",children:"Type"}),(0,s.jsxs)(o.Ph,{value:K,onValueChange:W,children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All Types"}),(0,s.jsx)(o.Ql,{value:"IRS",children:"IRS"}),(0,s.jsx)(o.Ql,{value:"CCS",children:"CCS"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"sort",children:"Sort By"}),(0,s.jsxs)(o.Ph,{value:$,onValueChange:ee,children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"created_at",children:"Created Date"}),(0,s.jsx)(o.Ql,{value:"name",children:"Name"}),(0,s.jsx)(o.Ql,{value:"status",children:"Status"}),(0,s.jsx)(o.Ql,{value:"pv",children:"Present Value"})]})]})]})]})})]}),L.length>0&&(0,s.jsx)(i.Zb,{className:"mb-6 border-blue-200 bg-blue-50",children:(0,s.jsx)(i.aY,{className:"py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:[L.length," run",L.length>1?"s":""," selected"]}),(0,s.jsxs)(r.z,{variant:"ghost",size:"sm",onClick:()=>q([]),className:"text-blue-600 hover:text-blue-800",children:[(0,s.jsx)(C.Z,{className:"h-4 w-4 mr-1"}),"Clear Selection"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>{t(e=>e.filter(e=>!L.includes(e.id))),q([])},className:"text-red-600 border-red-300 hover:bg-red-50",children:[(0,s.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Delete Selected"]}),(0,s.jsxs)(r.z,{variant:"outline",size:"sm",className:"text-green-600 border-green-300 hover:bg-green-50",children:[(0,s.jsx)(k.Z,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),(0,s.jsxs)(r.z,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:[(0,s.jsx)(F.Z,{className:"h-4 w-4 mr-2"}),"Share Selected"]})]})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)(i.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsx)(i.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Total Runs"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-white",children:a.length})]}),(0,s.jsx)(D.Z,{className:"h-8 w-8 text-blue-400"})]})})}),(0,s.jsx)(i.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsx)(i.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Completed"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-400",children:a.filter(e=>"completed"===e.status).length})]}),(0,s.jsx)(p.Z,{className:"h-8 w-8 text-green-400"})]})})}),(0,s.jsx)(i.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsx)(i.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Running"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:a.filter(e=>"running"===e.status).length})]}),(0,s.jsx)(v.Z,{className:"h-8 w-8 text-blue-400"})]})})}),(0,s.jsx)(i.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsx)(i.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Failed"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-400",children:a.filter(e=>"failed"===e.status).length})]}),(0,s.jsx)(f.Z,{className:"h-8 w-8 text-red-400"})]})})})]}),(0,s.jsx)(i.Zb,{className:"bg-gray-800 border-gray-700",children:(0,s.jsxs)(i.Ol,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.ll,{className:"text-white",children:["All Runs (",eu.length,")"]}),(0,s.jsx)(i.SZ,{className:"text-gray-300",children:"Manage your valuation calculations"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.X,{checked:L.length===eu.length&&eu.length>0,onCheckedChange:()=>{L.length===eu.length?q([]):q(eu.map(e=>e.id))}}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:"Select All"})]})]}),(0,s.jsxs)(j.mQ,{defaultValue:"all",className:"w-full",children:[(0,s.jsxs)(j.dr,{className:"grid w-full grid-cols-4 bg-gray-700",children:[(0,s.jsx)(j.SP,{value:"all",className:"data-[state=active]:bg-gray-600 data-[state=active]:text-white",children:"All Runs"}),(0,s.jsx)(j.SP,{value:"my",className:"data-[state=active]:bg-gray-600 data-[state=active]:text-white",children:"My Runs"}),(0,s.jsx)(j.SP,{value:"recent",className:"data-[state=active]:bg-gray-600 data-[state=active]:text-white",children:"Recent"}),(0,s.jsx)(j.SP,{value:"archived",className:"data-[state=active]:bg-gray-600 data-[state=active]:text-white",children:"Archived"})]}),(0,s.jsx)(j.nU,{value:"all",className:"mt-4",children:(0,s.jsxs)(i.aY,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(u.iA,{children:[(0,s.jsx)(u.xD,{children:(0,s.jsxs)(u.SC,{className:"border-gray-700",children:[(0,s.jsx)(u.ss,{className:"w-12 text-gray-300",children:"Select"}),(0,s.jsx)(u.ss,{className:"text-gray-300",children:"Name"}),(0,s.jsx)(u.ss,{className:"text-gray-300",children:"Type"}),(0,s.jsx)(u.ss,{className:"text-gray-300",children:"Status"}),(0,s.jsx)(u.ss,{className:"text-gray-300",children:"Notional"}),(0,s.jsx)(u.ss,{className:"text-gray-300",children:"PV"}),(0,s.jsx)(u.ss,{className:"text-gray-300",children:"PV01"}),(0,s.jsx)(u.ss,{className:"text-gray-300",children:"Created"}),(0,s.jsx)(u.ss,{className:"w-20 text-gray-300",children:"Actions"})]})}),(0,s.jsx)(u.RM,{children:em.map(e=>(0,s.jsxs)(u.SC,{className:"border-gray-700 hover:bg-gray-700/50",children:[(0,s.jsx)(u.pj,{children:(0,s.jsx)(g.X,{checked:L.includes(e.id),onCheckedChange:()=>handleSelectRun(e.id)})}),(0,s.jsx)(u.pj,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:e.id})]})}),(0,s.jsx)(u.pj,{children:getTypeBadge(e.type)}),(0,s.jsx)(u.pj,{children:getStatusBadge(e.status)}),(0,s.jsx)(u.pj,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-white",children:e.notional.toLocaleString()}),(0,s.jsx)("div",{className:"text-sm text-gray-400",children:e.currency})]})}),(0,s.jsx)(u.pj,{children:void 0!==e.pv?(0,s.jsxs)("div",{className:"font-medium ".concat(e.pv>=0?"text-green-400":"text-red-400"),children:[e.pv.toLocaleString()," ",e.currency]}):(0,s.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,s.jsx)(u.pj,{children:void 0!==e.pv01?(0,s.jsx)("div",{className:"font-medium text-white",children:e.pv01.toLocaleString()}):(0,s.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,s.jsxs)(u.pj,{children:[(0,s.jsx)("div",{className:"text-sm text-white",children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleTimeString()})]}),(0,s.jsx)(u.pj,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(r.z,{variant:"ghost",size:"sm",onClick:()=>handleViewRun(e.id),children:(0,s.jsx)(_.Z,{className:"h-4 w-4"})}),(0,s.jsx)(r.z,{variant:"ghost",size:"sm",onClick:()=>handleDeleteRun(e.id),children:(0,s.jsx)(I.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})}),eh>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(es-1)*en+1," to ",Math.min(es*en,eu.length)," of ",eu.length," runs"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>el(e=>Math.max(1,e-1)),disabled:1===es,children:(0,s.jsx)(P.Z,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"text-sm",children:["Page ",es," of ",eh]}),(0,s.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>el(e=>Math.min(eh,e+1)),disabled:es===eh,children:(0,s.jsx)(O.Z,{className:"h-4 w-4"})})]})]})]})}),(0,s.jsx)(j.nU,{value:"my",className:"mt-4",children:(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(Z.Z,{className:"h-12 w-12 mx-auto mb-4"}),(0,s.jsx)("p",{children:"My runs will appear here"})]})}),(0,s.jsx)(j.nU,{value:"recent",className:"mt-4",children:(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(v.Z,{className:"h-12 w-12 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Recent runs will appear here"})]})}),(0,s.jsx)(j.nU,{value:"archived",className:"mt-4",children:(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(Y.Z,{className:"h-12 w-12 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Archived runs will appear here"})]})})]})]})}),Q&&(0,s.jsxs)(h.bZ,{className:"mt-6",variant:"destructive",children:[(0,s.jsx)(T.Z,{className:"h-4 w-4"}),(0,s.jsx)(h.X,{children:Q})]})]}),(0,s.jsx)(m.Vq,{open:M,onOpenChange:V,children:(0,s.jsxs)(m.cZ,{className:"sm:max-w-md",children:[(0,s.jsxs)(m.fK,{children:[(0,s.jsx)(m.$N,{children:"Create New Run"}),(0,s.jsx)(m.Be,{children:"Configure your valuation parameters"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"name",children:"Run Name"}),(0,s.jsx)(c.I,{id:"name",placeholder:"Enter run name...",value:eo.name,onChange:e=>ex({...eo,name:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"type",children:"Type"}),(0,s.jsxs)(o.Ph,{value:eo.type,onValueChange:e=>ex({...eo,type:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"IRS",children:"Interest Rate Swap"}),(0,s.jsx)(o.Ql,{value:"CCS",children:"Cross Currency Swap"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"currency",children:"Currency"}),(0,s.jsxs)(o.Ph,{value:eo.currency,onValueChange:e=>ex({...eo,currency:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"USD",children:"USD"}),(0,s.jsx)(o.Ql,{value:"EUR",children:"EUR"}),(0,s.jsx)(o.Ql,{value:"GBP",children:"GBP"}),(0,s.jsx)(o.Ql,{value:"JPY",children:"JPY"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"notional",children:"Notional Amount"}),(0,s.jsx)(c.I,{id:"notional",type:"number",placeholder:"1000000",value:eo.notional,onChange:e=>ex({...eo,notional:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"tenor",children:"Tenor"}),(0,s.jsxs)(o.Ph,{value:eo.tenor,onValueChange:e=>ex({...eo,tenor:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"1Y",children:"1 Year"}),(0,s.jsx)(o.Ql,{value:"2Y",children:"2 Years"}),(0,s.jsx)(o.Ql,{value:"3Y",children:"3 Years"}),(0,s.jsx)(o.Ql,{value:"5Y",children:"5 Years"}),(0,s.jsx)(o.Ql,{value:"10Y",children:"10 Years"})]})]})]})]}),"IRS"===eo.type&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"fixedRate",children:"Fixed Rate (%)"}),(0,s.jsx)(c.I,{id:"fixedRate",type:"number",step:"0.01",placeholder:"3.5",value:eo.fixedRate,onChange:e=>ex({...eo,fixedRate:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d._,{htmlFor:"floatingIndex",children:"Floating Index"}),(0,s.jsxs)(o.Ph,{value:eo.floatingIndex,onValueChange:e=>ex({...eo,floatingIndex:e}),children:[(0,s.jsx)(o.i4,{children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"SOFR",children:"SOFR"}),(0,s.jsx)(o.Ql,{value:"EURIBOR",children:"EURIBOR"}),(0,s.jsx)(o.Ql,{value:"SONIA",children:"SONIA"}),(0,s.jsx)(o.Ql,{value:"TONA",children:"TONA"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,s.jsx)(r.z,{onClick:handleNewRun,className:"flex-1",children:"Create Run"}),(0,s.jsx)(r.z,{variant:"outline",onClick:()=>{ei(!1),V(!1)},className:"flex-1",children:"Cancel"})]})]})]})})]})}},2031:function(e,a,t){"use strict";t.d(a,{$N:function(){return u},Be:function(){return h},Vq:function(){return c},cZ:function(){return x},fK:function(){return DialogHeader}});var s=t(7437),l=t(2265),n=t(8712),r=t(1628),i=t(9394);let c=n.fC;n.xz;let d=n.h_;n.x8;let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(n.aV,{ref:a,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l})});o.displayName=n.aV.displayName;let x=l.forwardRef((e,a)=>{let{className:t,children:l,...c}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(o,{}),(0,s.jsxs)(n.VY,{ref:a,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[l,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Pxu,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=n.VY.displayName;let DialogHeader=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};DialogHeader.displayName="DialogHeader";let u=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(n.Dx,{ref:a,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",t),...l})});u.displayName=n.Dx.displayName;let h=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(n.dk,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",t),...l})});h.displayName=n.dk.displayName}},function(e){e.O(0,[310,723,529,595,148,416,925,971,472,744],function(){return e(e.s=4278)}),_N_E=e.O()}]);