(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5851:function(e,t,s){Promise.resolve().then(s.bind(s,4411)),Promise.resolve().then(s.bind(s,7240)),Promise.resolve().then(s.bind(s,9825)),Promise.resolve().then(s.t.bind(s,2853,23)),Promise.resolve().then(s.bind(s,2206)),Promise.resolve().then(s.bind(s,9268)),Promise.resolve().then(s.t.bind(s,1371,23))},4411:function(e,t,s){"use strict";s.r(t),s.d(t,{AppShell:function(){return AppShell}});var r=s(7437),a=s(2265),n=s(3611),i=s(708),l=s(8004),o=s(1827),c=s(9409),d=s(3021),u=s(7972),m=s(3523),x=s(3291),f=s(1628),h=s(9394);let p=x.fC,g=x.xz;x.ZA,x.Uv,x.Tr,x.Ee;let v=a.forwardRef((e,t)=>{let{className:s,inset:a,children:n,...i}=e;return(0,r.jsxs)(x.fF,{ref:t,className:(0,f.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...i,children:[n,(0,r.jsx)(h.XCv,{className:"ml-auto"})]})});v.displayName=x.fF.displayName;let j=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(x.tu,{ref:t,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...a})});j.displayName=x.tu.displayName;let b=a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...n}=e;return(0,r.jsx)(x.Uv,{children:(0,r.jsx)(x.VY,{ref:t,sideOffset:a,className:(0,f.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...n})})});b.displayName=x.VY.displayName;let N=a.forwardRef((e,t)=>{let{className:s,inset:a,...n}=e;return(0,r.jsx)(x.ck,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",a&&"pl-8",s),...n})});N.displayName=x.ck.displayName;let y=a.forwardRef((e,t)=>{let{className:s,children:a,checked:n,...i}=e;return(0,r.jsxs)(x.oC,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(x.wU,{children:(0,r.jsx)(h.nQG,{className:"h-4 w-4"})})}),a]})});y.displayName=x.oC.displayName;let w=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(x.Rk,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(x.wU,{children:(0,r.jsx)(h.jXb,{className:"h-2 w-2 fill-current"})})}),a]})});w.displayName=x.Rk.displayName;let S=a.forwardRef((e,t)=>{let{className:s,inset:a,...n}=e;return(0,r.jsx)(x.__,{ref:t,className:(0,f.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...n})});S.displayName=x.__.displayName;let E=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(x.Z0,{ref:t,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",s),...a})});E.displayName=x.Z0.displayName;var k=s(9598),C=s(5831),T=s(1465),A=s(453),R=s(5217),I=s(2549),O=s(6104),Z=s(6245),z=s(9268),P=s(6454);function SettingsDrawer(e){let{isOpen:t,onClose:s}=e,{requireApiKey:i,apiKey:l,backendBaseUrl:o,setRequireApiKey:d,setApiKey:u,setBackendBaseUrl:m}=(0,z.useSettings)(),[x,f]=(0,a.useState)(l),[h,p]=(0,a.useState)(o),[g,v]=(0,a.useState)(i),[j,b]=(0,a.useState)(!1),[N,y]=(0,a.useState)(null),handleTestConnection=async()=>{b(!0),y(null);try{let e=P.x.getBaseUrl(),t=P.x.getApiKey();P.x.setBaseUrl(h),P.x.setApiKey(g?x:null);let s=await P.x.getJson("/healthz");s.error?y("❌ Connection failed: ".concat(s.error)):y("✅ Connection successful!"),P.x.setBaseUrl(e),P.x.setApiKey(t)}catch(e){y("❌ Connection failed: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{b(!1)}};return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-end justify-center p-4",children:(0,r.jsxs)(k.Zb,{className:"w-full max-w-2xl max-h-[80vh] flex flex-col",children:[(0,r.jsxs)(k.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,r.jsxs)(k.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5"}),"Settings"]}),(0,r.jsx)(n.z,{variant:"ghost",size:"sm",onClick:s,children:(0,r.jsx)(I.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)(R.Z,{}),(0,r.jsx)(k.aY,{className:"flex-1 overflow-y-auto p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Backend Configuration"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure the backend API endpoint and authentication."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(T._,{htmlFor:"backend-url",children:"Backend Base URL"}),(0,r.jsx)(C.I,{id:"backend-url",value:h,onChange:e=>p(e.target.value),placeholder:"http://localhost:8001"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"The base URL for the backend API (dev only)"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(A.r,{id:"require-api-key",checked:g,onCheckedChange:v}),(0,r.jsx)(T._,{htmlFor:"require-api-key",children:"Require API Key"})]}),g&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(T._,{htmlFor:"api-key",children:"API Key"}),(0,r.jsx)(C.I,{id:"api-key",type:"password",value:x,onChange:e=>f(e.target.value),placeholder:"Enter your API key"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"The X-API-Key header value for authentication"})]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(n.z,{variant:"outline",onClick:handleTestConnection,disabled:j,children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Testing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{className:"mr-2 h-4 w-4"}),"Test Connection"]})})}),N&&(0,r.jsx)("div",{className:"p-3 rounded-md text-sm ".concat(N.startsWith("✅")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:N})]}),(0,r.jsx)(R.Z,{}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Current Settings"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Summary of your current configuration."})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Backend URL:"}),(0,r.jsx)("span",{className:"font-mono",children:o})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"API Key Required:"}),(0,r.jsx)("span",{children:i?"Yes":"No"})]}),i&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"API Key:"}),(0,r.jsx)("span",{className:"font-mono",children:l?"".concat(l.substring(0,8),"..."):"Not set"})]})]})]})]})}),(0,r.jsx)(R.Z,{}),(0,r.jsxs)("div",{className:"p-4 flex justify-end gap-2",children:[(0,r.jsx)(n.z,{variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsxs)(n.z,{onClick:()=>{u(x),m(h),d(g),s()},children:[(0,r.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),"Save Settings"]})]})]})}):null}var D=s(4033),_=s(1396),B=s.n(_),L=s(7158),U=s(7480);function Breadcrumbs(){let e=(0,D.usePathname)(),t=(()=>{let t=e.split("/").filter(Boolean),s=[{label:"Home",href:"/"}],r="";return t.forEach((e,a)=>{r+="/".concat(e);let n=e;if(e.match(/^\d+$/)){let s=t[a-1];n="runs"===s?"Run #".concat(e):e}else n=e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");s.push({label:n,href:r,isLast:a===t.length-1})}),s})();return(0,r.jsx)("nav",{"aria-label":"Breadcrumb",className:"flex items-center space-x-1 text-sm",children:(0,r.jsx)("ol",{className:"flex items-center space-x-1",children:t.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center",children:[t>0&&(0,r.jsx)(L.Z,{className:"h-4 w-4 text-muted-foreground mx-1"}),e.isLast?(0,r.jsx)("span",{className:"text-foreground font-medium","aria-current":"page",children:e.label}):(0,r.jsx)(B(),{href:e.href,className:"text-muted-foreground hover:text-foreground transition-colors",children:0===t?(0,r.jsx)(U.Z,{className:"h-4 w-4"}):e.label})]},e.href))})})}var K=s(3088),V=s(4135),F=s(9825);function ThemeSwitch(){let{theme:e,toggleTheme:t}=(0,F.useTheme)();return(0,r.jsx)(n.z,{variant:"ghost",size:"icon",onClick:t,className:"h-9 w-9","aria-label":"Switch to ".concat("light"===e?"dark":"light"," theme"),children:"light"===e?(0,r.jsx)(K.Z,{className:"h-4 w-4"}):(0,r.jsx)(V.Z,{className:"h-4 w-4"})})}function Topbar(e){let{onMenuClick:t}=e,[s,x]=(0,a.useState)(!1);return(0,r.jsxs)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[(0,r.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(n.z,{variant:"ghost",size:"icon",className:"md:hidden",onClick:t,children:(0,r.jsx)(l.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-8 rounded-lg bg-brand-green flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"VA"})}),(0,r.jsxs)("div",{className:"hidden md:block",children:[(0,r.jsx)("h1",{className:"text-lg font-semibold",children:"Valuation Agent"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Financial Risk Platform"})]})]})]}),(0,r.jsx)("div",{className:"flex-1 max-w-md mx-4 hidden lg:block",children:(0,r.jsx)(Breadcrumbs,{})}),(0,r.jsx)("div",{className:"flex-1 max-w-md mx-4 hidden md:block lg:hidden",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",placeholder:"Search runs, instruments...",className:"w-full pl-10 pr-4 py-2 bg-muted rounded-lg border border-input focus:outline-none focus:ring-2 focus:ring-ring"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(i.C,{variant:"secondary",className:"hidden sm:flex",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"DEV"]}),(0,r.jsx)(ThemeSwitch,{}),(0,r.jsx)(n.z,{variant:"ghost",size:"icon",onClick:()=>x(!0),title:"Settings",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})}),(0,r.jsxs)(n.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-destructive rounded-full text-xs flex items-center justify-center text-destructive-foreground",children:"3"})]}),(0,r.jsxs)(p,{children:[(0,r.jsx)(g,{asChild:!0,children:(0,r.jsxs)(n.z,{variant:"ghost",className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:(0,r.jsx)(u.Z,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"hidden md:block",children:"John Doe"}),(0,r.jsx)(m.Z,{className:"h-4 w-4"})]})}),(0,r.jsxs)(b,{align:"end",className:"w-56",children:[(0,r.jsx)(S,{children:"My Account"}),(0,r.jsx)(E,{}),(0,r.jsxs)(N,{children:[(0,r.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Profile"]}),(0,r.jsxs)(N,{children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,r.jsx)(E,{}),(0,r.jsx)(N,{children:"Log out"})]})]})]})]}),(0,r.jsx)(SettingsDrawer,{isOpen:s,onClose:()=>x(!1)})]})}var J=s(6656),H=s(5119),M=s(8438),W=s(6637),X=s(7982),q=s(5790),G=s(2919),Y=s(2457),Q=s(9036),$=s(1291),ee=s(2882);let et=[{title:"Overview",items:[{title:"Dashboard",href:"/",icon:H.Z,badge:null}]},{title:"Valuation",items:[{title:"Runs",href:"/runs",icon:M.Z,badge:"12"},{title:"Intake",href:"/intake",icon:W.Z,badge:null},{title:"Document Analysis",href:"/intake/analyze",icon:X.Z,badge:null},{title:"Curves",href:"/curves",icon:q.Z,badge:null},{title:"Instruments",href:"/instruments",icon:G.Z,badge:null}]},{title:"Risk & Compliance",items:[{title:"XVA",href:"/xva",icon:Y.Z,badge:null},{title:"Governance",href:"/governance",icon:Q.Z,badge:null},{title:"Policy Editor",href:"/governance/policy",icon:Q.Z,badge:null},{title:"Audit Log",href:"/audit",icon:X.Z,badge:null}]},{title:"System",items:[{title:"Settings",href:"/settings",icon:c.Z,badge:null}]}];function Sidebar(e){let{isCollapsed:t,onToggle:s}=e,a=(0,D.usePathname)();return(0,r.jsxs)("div",{className:(0,f.cn)("flex h-full flex-col border-r bg-card transition-all duration-300",t?"w-16":"w-64"),children:[(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 border-b",children:[!t&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-6 w-6 rounded bg-brand-green flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-xs",children:"VA"})}),(0,r.jsx)("span",{className:"font-semibold",children:"Valuation Agent"})]}),(0,r.jsx)(n.z,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":t?"Expand sidebar":"Collapse sidebar",children:t?(0,r.jsx)(L.Z,{className:"h-4 w-4"}):(0,r.jsx)($.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)(J.x,{className:"flex-1 px-2 py-4",children:(0,r.jsx)("nav",{className:"space-y-6",children:et.map((e,s)=>(0,r.jsxs)("div",{children:[!t&&(0,r.jsx)("h3",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:e.title}),(0,r.jsx)("div",{className:"space-y-1",children:e.items.map(e=>{let s=a===e.href,l=e.icon;return(0,r.jsx)(B(),{href:e.href,children:(0,r.jsxs)(n.z,{variant:s?"secondary":"ghost",className:(0,f.cn)("w-full justify-start h-9",t?"px-2":"px-3",s&&"bg-secondary text-secondary-foreground"),"aria-label":"Navigate to ".concat(e.title),"aria-current":s?"page":void 0,children:[(0,r.jsx)(l,{className:(0,f.cn)("h-4 w-4",t?"mx-auto":"mr-3")}),!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"flex-1 text-left",children:e.title}),e.badge&&(0,r.jsx)(i.C,{variant:"secondary",className:"ml-auto",children:e.badge})]})]})},e.href)})}),s<et.length-1&&(0,r.jsx)(R.Z,{className:"my-4"})]},e.title))})}),(0,r.jsx)("div",{className:"p-2 border-t",children:(0,r.jsxs)(n.z,{variant:"outline",className:(0,f.cn)("w-full justify-start",t?"px-2":"px-3"),"aria-label":"Open chat assistant",onClick:()=>{let e=new CustomEvent("toggleChat",{detail:{open:!0}});window.dispatchEvent(e)},children:[(0,r.jsx)(ee.Z,{className:(0,f.cn)("h-4 w-4",t?"mx-auto":"mr-3")}),!t&&(0,r.jsx)("span",{children:"Chat Assistant"})]})})]})}var es=s(3966),er=s(5099),ea=s(1841),en=s(6020);function ChatPanel(){let[e,t]=(0,a.useState)(!1),[s,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)([{id:"1",type:"assistant",content:"Hello! I'm your valuation assistant. I can help you:\n\n• Analyze and explain valuation runs\n• Generate sensitivity scenarios\n• Export reports and documentation\n• Answer IFRS-13 compliance questions\n\nWhat would you like to know?",timestamp:new Date}]),[c,d]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),f=(0,a.useRef)(null),scrollToBottom=()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{scrollToBottom()},[l]),(0,a.useEffect)(()=>{let handleToggleChat=e=>{t(e.detail.open)};return window.addEventListener("toggleChat",handleToggleChat),()=>{window.removeEventListener("toggleChat",handleToggleChat)}},[]);let handleSendMessage=async()=>{if(!c.trim())return;let e={id:Date.now().toString(),type:"user",content:c,timestamp:new Date};o(t=>[...t,e]),d(""),x(!0),setTimeout(()=>{let e={id:(Date.now()+1).toString(),type:"assistant",content:"I understand you're asking about: "+c+". Let me analyze the latest valuation data and provide you with a comprehensive explanation...",timestamp:new Date};o(t=>[...t,e]),x(!1)},1500)};return e?(0,r.jsxs)("div",{className:"fixed right-0 top-0 h-full w-96 bg-gray-800 border-l border-gray-700 shadow-2xl z-50 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 bg-gray-900",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-600 bg-opacity-20 rounded-lg flex items-center justify-center",children:(0,r.jsx)(es.Z,{className:"w-4 h-4 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-white font-semibold",children:"Valuation Assistant"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"Online"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>i(!s),className:"text-gray-400 hover:text-white",children:s?(0,r.jsx)(er.Z,{className:"w-4 h-4"}):(0,r.jsx)(ea.Z,{className:"w-4 h-4"})}),(0,r.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>t(!1),className:"text-gray-400 hover:text-white",children:(0,r.jsx)(I.Z,{className:"w-4 h-4"})})]})]}),!s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map(e=>(0,r.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"flex space-x-2 max-w-[80%] ".concat("user"===e.type?"flex-row-reverse space-x-reverse":""),children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ".concat("user"===e.type?"bg-blue-600":"bg-green-600 bg-opacity-20"),children:"user"===e.type?(0,r.jsx)(u.Z,{className:"w-3 h-3 text-white"}):(0,r.jsx)(es.Z,{className:"w-3 h-3 text-green-600"})}),(0,r.jsxs)("div",{className:"rounded-lg p-3 ".concat("user"===e.type?"bg-blue-600 text-white":"bg-gray-700 text-gray-100"),children:[(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),(0,r.jsx)("span",{className:"text-xs opacity-70 mt-1 block",children:e.timestamp.toLocaleTimeString()})]})]})},e.id)),m&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsxs)("div",{className:"flex space-x-2 max-w-[80%]",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full bg-green-600 bg-opacity-20 flex items-center justify-center flex-shrink-0",children:(0,r.jsx)(es.Z,{className:"w-3 h-3 text-green-600"})}),(0,r.jsx)("div",{className:"bg-gray-700 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),(0,r.jsx)("div",{ref:f})]}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-700",children:[(0,r.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:"Quick Actions:"}),(0,r.jsx)("div",{className:"space-y-2",children:["Can you explain the latest IRS run results?","Generate a sensitivity analysis for +1bp","What's the IFRS-13 classification?","Export the current run data"].map((e,t)=>(0,r.jsx)(n.z,{variant:"outline",size:"sm",className:"w-full text-left justify-start text-xs h-auto py-2 px-3",onClick:()=>d(e),children:e},t))})]}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessage())},placeholder:"Ask about valuations, sensitivities, or IFRS-13...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)(n.z,{onClick:handleSendMessage,disabled:!c.trim(),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:(0,r.jsx)(en.Z,{className:"w-4 h-4"})})]})})]})]}):null}function AppShell(e){let{children:t}=e,[s,n]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-900",children:[(0,r.jsx)("nav",{role:"navigation","aria-label":"Main navigation",className:"flex-shrink-0",children:(0,r.jsx)(Sidebar,{isCollapsed:s,onToggle:()=>n(!s)})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)("header",{role:"banner",children:(0,r.jsx)(Topbar,{onMenuClick:()=>n(!s)})}),(0,r.jsx)("main",{role:"main",className:"flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"max-w-[1440px] mx-auto px-6 py-6",children:t})}),(0,r.jsx)("footer",{role:"contentinfo",className:"border-t border-gray-700 bg-gray-800 px-6 py-2",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{children:"\xa9 2024 Valuation Agent Platform"}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"Version 1.0.0"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(i.C,{variant:"outline",className:"status-badge dev",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"DEV Environment"]})})]})})]}),(0,r.jsx)(ChatPanel,{})]})}},7240:function(e,t,s){"use strict";s.r(t),s.d(t,{ErrorBoundary:function(){return ErrorBoundary},useErrorHandler:function(){return useErrorHandler},withErrorBoundary:function(){return withErrorBoundary}});var r=s(7437),a=s(2265),n=s(2894),i=s(4280),l=s(7480),o=s(3611),c=s(9598);s(5718);let ErrorBoundary=class ErrorBoundary extends a.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t}),console.error("Error details:",{error:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:new Date().toISOString()})}render(){if(this.state.hasError){if(this.props.fallback){let e=this.props.fallback;return(0,r.jsx)(e,{error:this.state.error,resetError:this.resetError})}return(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:(0,r.jsxs)(c.Zb,{className:"w-full max-w-2xl",children:[(0,r.jsxs)(c.Ol,{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(n.Z,{className:"w-6 h-6 text-red-600"})}),(0,r.jsx)(c.ll,{className:"text-2xl font-bold text-gray-900",children:"Something went wrong"}),(0,r.jsx)(c.SZ,{className:"text-gray-600",children:"We encountered an unexpected error. Please try again or contact support if the problem persists."})]}),(0,r.jsxs)(c.aY,{className:"space-y-4",children:[!1,(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,r.jsxs)(o.z,{onClick:this.resetError,className:"flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4"}),"Try Again"]}),(0,r.jsxs)(o.z,{variant:"outline",onClick:()=>window.location.href="/",className:"flex items-center gap-2",children:[(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Go Home"]})]}),(0,r.jsxs)("div",{className:"text-center text-sm text-gray-500",children:[(0,r.jsx)("p",{children:"If this error persists, please contact our support team."}),(0,r.jsxs)("p",{children:["Error ID: ",Date.now().toString(36)]})]})]})]})})}return this.props.children}constructor(e){super(e),this.resetError=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}};let useErrorHandler=()=>e=>{throw e},withErrorBoundary=(e,t)=>{let WrappedComponent=s=>(0,r.jsx)(ErrorBoundary,{fallback:t,children:(0,r.jsx)(e,{...s})});return WrappedComponent.displayName="withErrorBoundary(".concat(e.displayName||e.name,")"),WrappedComponent}},9825:function(e,t,s){"use strict";s.r(t),s.d(t,{ThemeProvider:function(){return ThemeProvider},useTheme:function(){return useTheme}});var r=s(7437),a=s(2265);let n=(0,a.createContext)(void 0);function ThemeProvider(e){let{children:t}=e,[s,i]=(0,a.useState)("dark"),[l,o]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=localStorage.getItem("theme");e&&i(e),o(!0)},[]),(0,a.useEffect)(()=>{l&&(localStorage.setItem("theme",s),document.documentElement.className=s)},[s,l]),l)?(0,r.jsx)(n.Provider,{value:{theme:s,setTheme:i,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")}},children:t}):null}function useTheme(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},5718:function(e,t,s){"use strict";s.d(t,{X:function(){return d},bZ:function(){return o}});var r=s(7437),a=s(2265),n=s(6061),i=s(1628);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:a}),s),...n})});o.displayName="Alert";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});c.displayName="AlertTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...a})});d.displayName="AlertDescription"},708:function(e,t,s){"use strict";s.d(t,{C:function(){return Badge}});var r=s(7437);s(2265);var a=s(6061),n=s(1628);let i=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},3611:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var r=s(7437),a=s(2265),n=s(7256),i=s(6061),l=s(1628);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},9598:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var r=s(7437),a=s(2265),n=s(1628);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},5831:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(1628);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},1465:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var r=s(7437),a=s(2265),n=s(6743),i=s(6061),l=s(1628);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),s),...a})});c.displayName=n.f.displayName},6656:function(e,t,s){"use strict";s.d(t,{x:function(){return l}});var r=s(7437),a=s(2265),n=s(5331),i=s(1628);let l=a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(n.fC,{ref:t,className:(0,i.cn)("relative overflow-hidden",s),...l,children:[(0,r.jsx)(n.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,r.jsx)(o,{}),(0,r.jsx)(n.Ns,{})]})});l.displayName=n.fC.displayName;let o=a.forwardRef((e,t)=>{let{className:s,orientation:a="vertical",...l}=e;return(0,r.jsx)(n.gb,{ref:t,orientation:a,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,r.jsx)(n.q4,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=n.gb.displayName},5217:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(7437),a=s(2265),n=s(6823),i=s(1628);let l=a.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:l=!0,...o}=e;return(0,r.jsx)(n.f,{ref:t,decorative:l,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...o})});l.displayName=n.f.displayName},453:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var r=s(7437),a=s(2265),n=s(2376),i=s(1628);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:(0,r.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=n.fC.displayName},2206:function(e,t,s){"use strict";s.r(t),s.d(t,{Toaster:function(){return Toaster}});var r=s(7437),a=s(446),n=s(2265),i=s(8361),l=s(6061),o=s(1628),c=s(9394);let d=i.zt,u=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.l_,{ref:t,className:(0,o.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a})});u.displayName=i.l_.displayName;let m=(0,l.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),x=n.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)(i.fC,{ref:t,className:(0,o.cn)(m({variant:a}),s),...n})});x.displayName=i.fC.displayName;let f=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.aU,{ref:t,className:(0,o.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a})});f.displayName=i.aU.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.x8,{ref:t,className:(0,o.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:(0,r.jsx)(c.Pxu,{className:"h-4 w-4"})})});h.displayName=i.x8.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,o.cn)("text-sm font-semibold [&+div]:text-xs",s),...a})});p.displayName=i.Dx.displayName;let g=n.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,o.cn)("text-sm opacity-90",s),...a})});function Toaster(){let{toasts:e}=(0,a.pm)();return(0,r.jsxs)(d,{children:[e.map(function(e){let{id:t,title:s,description:a,action:n,...i}=e;return(0,r.jsxs)(x,{...i,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[s&&(0,r.jsx)(p,{children:s}),a&&(0,r.jsx)(g,{children:a})]}),n,(0,r.jsx)(h,{})]},t)}),(0,r.jsx)(u,{})]})}g.displayName=i.dk.displayName},9268:function(e,t,s){"use strict";s.r(t),s.d(t,{SettingsProvider:function(){return SettingsProvider},useSettings:function(){return useSettings}});var r=s(7437),a=s(2265),n=s(6454),i=s(2601);let l=(0,a.createContext)(void 0);function SettingsProvider(e){let{children:t}=e,[s,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(i.env.NEXT_PUBLIC_BACKEND_BASE||"http://localhost:8001");return(0,a.useEffect)(()=>{let e=localStorage.getItem("require-api-key"),t=localStorage.getItem("api-key"),s=localStorage.getItem("backend-base-url");e&&o(JSON.parse(e)),t&&d(t),s&&m(s)},[]),(0,a.useEffect)(()=>{localStorage.setItem("require-api-key",JSON.stringify(s))},[s]),(0,a.useEffect)(()=>{localStorage.setItem("api-key",c)},[c]),(0,a.useEffect)(()=>{localStorage.setItem("backend-base-url",u)},[u]),(0,a.useEffect)(()=>{n.x.setBaseUrl(u),n.x.setApiKey(s?c:null)},[u,s,c]),(0,r.jsx)(l.Provider,{value:{requireApiKey:s,apiKey:c,backendBaseUrl:u,setRequireApiKey:o,setApiKey:d,setBackendBaseUrl:m},children:t})}function useSettings(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}},446:function(e,t,s){"use strict";s.d(t,{pm:function(){return useToast}});var r=s(2265);let a=0;function genId(){return(a=(a+1)%Number.MAX_SAFE_INTEGER).toString()}let n=new Map,addToRemoveQueue=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),dispatch({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},reducer=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?addToRemoveQueue(s):e.toasts.forEach(e=>{addToRemoveQueue(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],l={toasts:[]};function dispatch(e){l=reducer(l,e),i.forEach(e=>{e(l)})}function toast(e){let{...t}=e,s=genId(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:s});return dispatch({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||dismiss()}}}),{id:s,dismiss,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function useToast(){let[e,t]=r.useState(l);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast,dismiss:e=>dispatch({type:"DISMISS_TOAST",toastId:e})}}},1628:function(e,t,s){"use strict";s.d(t,{cn:function(){return cn}});var r=s(7042),a=s(4769);function cn(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},6454:function(e,t,s){"use strict";s.d(t,{x:function(){return n}});var r=s(2601);let a=r.env.NEXT_PUBLIC_BACKEND_BASE||"http://localhost:8001";let ApiClient=class ApiClient{setApiKey(e){this.apiKey=e}setBaseUrl(e){this.baseUrl=e.replace(/\/$/,"")}getBaseUrl(){return this.baseUrl}getApiKey(){return this.apiKey}getHeaders(e){let t={"Content-Type":"application/json"};return(null==e?void 0:e.headers)&&(e.headers instanceof Headers?e.headers.forEach((e,s)=>{t[s]=e}):Array.isArray(e.headers)?e.headers.forEach(e=>{let[s,r]=e;t[s]=r}):Object.assign(t,e.headers)),this.apiKey&&(t["X-API-Key"]=this.apiKey),t}async getJson(e,t){try{let s="".concat(this.baseUrl).concat(e.startsWith("/")?e:"/".concat(e)),r=await fetch(s,{method:"GET",headers:this.getHeaders(t),...t}),a=await r.json();if(!r.ok)return{error:a.detail||"HTTP ".concat(r.status),status:r.status};return{data:a,status:r.status}}catch(e){return{error:e instanceof Error?e.message:"Network error",status:0}}}async postJson(e,t,s){try{let r="".concat(this.baseUrl).concat(e.startsWith("/")?e:"/".concat(e)),a=await fetch(r,{method:"POST",headers:this.getHeaders(s),body:JSON.stringify(t),...s}),n=await a.json();if(!a.ok)return{error:n.detail||"HTTP ".concat(a.status),status:a.status};return{data:n,status:a.status}}catch(e){return{error:e instanceof Error?e.message:"Network error",status:0}}}streamSSE(e,t){return new Promise((s,r)=>{let a="".concat(this.baseUrl).concat(e.startsWith("/")?e:"/".concat(e));this.apiKey&&this.apiKey;let n=new EventSource(a,{withCredentials:!1});n.onopen=()=>{console.log("SSE connection opened")},n.onmessage=e=>{try{let s=JSON.parse(e.data);t({event:"message",data:s})}catch(e){console.error("Error parsing SSE data:",e)}},n.addEventListener("TOOL_CALLED",e=>{try{let s=JSON.parse(e.data);t({event:"TOOL_CALLED",data:s})}catch(e){console.error("Error parsing TOOL_CALLED event:",e)}}),n.addEventListener("TOKEN",e=>{try{let s=JSON.parse(e.data);t({event:"TOKEN",data:s})}catch(e){console.error("Error parsing TOKEN event:",e)}}),n.addEventListener("CITATIONS",e=>{try{let s=JSON.parse(e.data);t({event:"CITATIONS",data:s})}catch(e){console.error("Error parsing CITATIONS event:",e)}}),n.addEventListener("CONFIDENCE",e=>{try{let s=JSON.parse(e.data);t({event:"CONFIDENCE",data:s})}catch(e){console.error("Error parsing CONFIDENCE event:",e)}}),n.addEventListener("DONE",e=>{try{let r=JSON.parse(e.data);t({event:"DONE",data:r}),n.close(),s()}catch(e){console.error("Error parsing DONE event:",e),n.close(),s()}}),n.addEventListener("ERROR",e=>{try{let s=JSON.parse(e.data);t({event:"ERROR",data:s}),n.close(),r(Error(s.error||"SSE error"))}catch(e){console.error("Error parsing ERROR event:",e),n.close(),r(e)}}),n.onerror=e=>{console.error("SSE connection error:",e),n.close(),r(Error("SSE connection failed"))}})}constructor(e=a){this.apiKey=null,this.baseUrl=e.replace(/\/$/,"")}};let n=new ApiClient},2853:function(){}},function(e){e.O(0,[310,723,529,9,393,971,472,744],function(){return e(e.s=5851)}),_N_E=e.O()}]);