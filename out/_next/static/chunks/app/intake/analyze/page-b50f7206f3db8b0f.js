(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{5817:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6637:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},1541:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,n.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2601:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(8960)},8381:function(e,t,r){Promise.resolve().then(r.bind(r,5239))},5239:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return DocumentAnalyzePage}});var n=r(7437),s=r(2265),i=r(3611),a=r(9598),o=r(708),l=r(1465),c=r(6005),d=r(5718),u=r(3008),m=r(1981),p=r(2104),x=r(6637),h=r(6264),f=r(1541),y=r(5817),j=r(6454),v=r(8844);function DocumentAnalyzePage(){var e;let[t,r]=(0,s.useState)(!1),[g,w]=(0,s.useState)(!1),[b,N]=(0,s.useState)(""),[k,T]=(0,s.useState)(null),[C,S]=(0,s.useState)(null),[_,D]=(0,s.useState)(null),E=(0,s.useCallback)(async e=>{e.preventDefault(),r(!1);let t=Array.from(e.dataTransfer.files);if(0===t.length)return;let n=t[0];if(!n.type.includes("pdf")&&!n.type.includes("docx")){S("Please upload a PDF or DOCX file");return}await processFile(n)},[]),Z=(0,s.useCallback)(async e=>{let t=e.target.files;if(!t||0===t.length)return;let r=t[0];await processFile(r)},[]),processFile=async e=>{w(!0),S(null),T(null),N("Uploading document...");try{let t=new FormData;t.append("file",e);let r=await j.x.postJson("/api/v1/docs/upload",t,{headers:{"Content-Type":"multipart/form-data"}});if(r.error)throw Error(r.error);let{doc_id:n}=r.data;D(n),N("Ingesting document...");let s=await j.x.postJson("/api/v1/docs/ingest",{doc_id:n,standard:"IFRS 13"});if(s.error)throw Error(s.error);N("Analyzing document...");let i=await j.x.postJson("/api/v1/feedback/analyze",{doc_id:n,standard:"IFRS 13"});if(i.error)throw Error(i.error);T(i.data),N("Analysis complete!")}catch(e){S(e instanceof Error?e.message:"An unexpected error occurred")}finally{w(!1)}},getMetBadgeColor=e=>e?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200";return(0,n.jsxs)("div",{className:"container mx-auto p-6 max-w-6xl",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,n.jsx)(x.Z,{className:"h-8 w-8"}),"Document Analysis"]}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:"Upload a document for IFRS compliance analysis and feedback."})]}),(0,n.jsxs)(a.Zb,{className:"mb-6",children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsx)(a.ll,{children:"Upload Document"}),(0,n.jsx)(a.SZ,{children:"Upload a PDF or DOCX document for IFRS compliance analysis."})]}),(0,n.jsx)(a.aY,{children:(0,n.jsx)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(t?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"," ").concat(g?"opacity-50 pointer-events-none":""),onDragOver:e=>{e.preventDefault(),r(!0)},onDragLeave:()=>r(!1),onDrop:E,children:g?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(h.Z,{className:"h-12 w-12 mx-auto animate-spin text-primary"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-lg font-medium",children:b}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please wait..."})]})]}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(f.Z,{className:"h-12 w-12 mx-auto text-muted-foreground"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-lg font-medium",children:"Drop your document here"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"or click to browse files"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(l._,{htmlFor:"file-upload",className:"cursor-pointer",children:(0,n.jsx)(i.z,{asChild:!0,children:(0,n.jsx)("span",{children:"Choose File"})})}),(0,n.jsx)("input",{id:"file-upload",type:"file",accept:".pdf,.docx",onChange:Z,className:"hidden"})]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Supports PDF and DOCX files up to 10MB"})]})})})]}),C&&(0,n.jsxs)(d.bZ,{className:"mb-6",variant:"destructive",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4"}),(0,n.jsx)(d.X,{children:C})]}),k&&(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(a.Zb,{children:[(0,n.jsx)(a.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(e=>{switch(e){case"OK":return(0,n.jsx)(u.Z,{className:"h-4 w-4 text-green-500"});case"NEEDS_REVIEW":return(0,n.jsx)(m.Z,{className:"h-4 w-4 text-yellow-500"});case"ABSTAIN":return(0,n.jsx)(p.Z,{className:"h-4 w-4 text-red-500"});default:return(0,n.jsx)(m.Z,{className:"h-4 w-4 text-gray-500"})}})(k.status),"Analysis Summary"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(o.C,{className:(e=>{switch(e){case"OK":return"bg-green-100 text-green-800 border-green-200";case"NEEDS_REVIEW":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"ABSTAIN":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(k.status),children:k.status}),(0,n.jsxs)(o.C,{className:(e=k.confidence)>=.8?"bg-green-100 text-green-800":e>=.6?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:[Math.round(100*k.confidence),"% confidence"]})]})]})}),(0,n.jsx)(a.aY,{children:(0,n.jsx)("div",{className:"prose max-w-none",children:(0,n.jsx)("div",{className:"whitespace-pre-wrap",children:k.summary})})})]}),(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(a.ll,{children:"Compliance Checklist"}),(0,n.jsxs)(i.z,{onClick:()=>{if(!k||!_)return;let e={doc_id:_,timestamp:new Date().toISOString(),feedback:k},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="".concat(_,"-feedback.json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},variant:"outline",children:[(0,n.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Export Findings"]})]}),(0,n.jsx)(a.SZ,{children:"Detailed compliance analysis with citations"})]}),(0,n.jsx)(a.aY,{children:(0,n.jsxs)(c.iA,{children:[(0,n.jsx)(c.xD,{children:(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.ss,{children:"Item"}),(0,n.jsx)(c.ss,{children:"Description"}),(0,n.jsx)(c.ss,{children:"Status"}),(0,n.jsx)(c.ss,{children:"Notes"}),(0,n.jsx)(c.ss,{children:"Citations"})]})}),(0,n.jsx)(c.RM,{children:k.items.map(e=>(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.pj,{className:"font-medium",children:e.key}),(0,n.jsx)(c.pj,{children:e.description}),(0,n.jsx)(c.pj,{children:(0,n.jsx)(o.C,{className:getMetBadgeColor(e.met),children:e.met?"Met":"Not Met"})}),(0,n.jsx)(c.pj,{children:e.notes||"—"}),(0,n.jsx)(c.pj,{children:e.citations.length>0?(0,n.jsx)("div",{className:"space-y-1",children:e.citations.map((e,t)=>(0,n.jsxs)("div",{className:"text-xs",children:[(0,n.jsx)("div",{className:"font-medium",children:e.standard}),(0,n.jsxs)("div",{className:"text-muted-foreground",children:[e.section&&"".concat(e.section," "),e.paragraph]})]},t))}):(0,n.jsx)("span",{className:"text-muted-foreground",children:"—"})})]},e.id))})]})})]}),k.items.some(e=>e.citations.length>0)&&(0,n.jsx)(v.Z,{citations:k.items.flatMap(e=>e.citations),title:"All Citations",description:"Complete list of IFRS references used in the analysis"})]})]})}},8960:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}function runClearTimeout(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var i=[],a=!1,o=-1;function cleanUpNextTick(){a&&n&&(a=!1,n.length?i=n.concat(i):o=-1,i.length&&drainQueue())}function drainQueue(){if(!a){var e=runTimeout(cleanUpNextTick);a=!0;for(var t=i.length;t;){for(n=i,i=[];++o<t;)n&&n[o].run();o=-1,t=i.length}n=null,a=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new Item(e,t)),1!==i.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=noop,s.addListener=noop,s.once=noop,s.off=noop,s.removeListener=noop,s.removeAllListeners=noop,s.emit=noop,s.prependListener=noop,s.prependOnceListener=noop,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,__nccwpck_require__),i=!1}finally{i&&delete r[e]}return s.exports}__nccwpck_require__.ab="//";var n=__nccwpck_require__(229);e.exports=n}()},6743:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var n=r(2265),s=r(9790),i=r(7437),a=n.forwardRef((e,t)=>(0,i.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{let r=t.target;r.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var o=a},9790:function(e,t,r){"use strict";r.d(t,{WV:function(){return o},jH:function(){return dispatchDiscreteCustomEvent}});var n=r(2265),s=r(4887),i=r(7256),a=r(7437),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,i.Z8)(`Primitive.${t}`),s=n.forwardRef((e,n)=>{let{asChild:s,...i}=e,o=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o,{...i,ref:n})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function dispatchDiscreteCustomEvent(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[723,96,971,472,744],function(){return e(e.s=8381)}),_N_E=e.O()}]);